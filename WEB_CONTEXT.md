## План переноса функционала бота на веб (Django + PostgreSQL)

### Этап 1. Каркас проекта (текущий этап)

- [x] **Определить стек**: Django + PostgreSQL, хранение контактов и лидов в БД.
- [x] **Добавить зависимости** в `requirements.txt`: `django`, `psycopg2-binary`.
- [x] **Создать Django‑проект** в папке `web/` с именем `base_site`.
- [x] **Создать приложение** `core` внутри проекта.
- [x] **Базовые настройки**:
  - загрузка `.env` (секретный ключ, параметры БД);
  - настройка PostgreSQL через переменные окружения;
  - подключение приложения `core` в `INSTALLED_APPS`.
- [x] **Маршруты**:
  - корневой URL (заглушка «Сайт работает»);
  - доступ к `/admin/`.

### Этап 2. Модели и база данных

- [ ] **Пользователи**:
  - кастомная модель `User` (роль: `user`, `support`, `admin`; статус: `pending`, `approved`, `banned`);
  - механика регистрации/логина/выхода.
- [ ] **Типы баз и контакты**:
  - `BaseType` (аналог `BASE_TYPES`);
  - `Contact` (значение, к какой базе относится, кому и когда выдано и т.д.).
- [ ] **Лиды и отчёты**:
  - `LeadType` (аналог `LEAD_TYPES`);
  - `Lead` (кто сдал, контакт, тип, источник, дата, ссылка на файл).
- [ ] **Поддержка**:
  - `SupportThread` (диалог пользователь–поддержка);
  - `SupportMessage` (сообщения в диалогах).
- [ ] **Миграции** и первичная инициализация справочников (`BaseType`, `LeadType`).

### Этап 3. Пользовательский интерфейс

- [ ] **Регистрация и вход**:
  - формы регистрации и авторизации;
  - подтверждение email ссылкой.
- [ ] **Кабинет пользователя**:
  - главное меню: «получить списки контактов», «отчёт по лидам», «поддержка», «статистика лидов»;
  - перенос логики выдачи баз контактов из бота;
  - формы для сдачи отчётов и просмотра своих лидов.
- [ ] **Поддержка**:
  - интерфейс диалога с саппортом (аналог текущих топиков в чате поддержки).

### Этап 4. Интерфейс админа и саппортов

- [ ] **Админский раздел**:
  - список пользователей и заявок (`pending`), кнопки «одобрить/бан»;
  - статистика по базам (`stats`) и по лидам (`leadstats`);
  - выдача дополнительных лимитов.
- [ ] **Загрузка/выгрузка баз**:
  - загрузка Excel в том же формате, что в боте (импорт в PostgreSQL);
  - выгрузка баз и лидов в Excel/CSV.
- [ ] **Интерфейс поддержки**:
  - список активных диалогов;
  - просмотр и ответы на сообщения пользователей.

### Этап 5. Деплой

- [ ] Настройка PostgreSQL на сервере.
- [ ] Установка зависимостей и прогон миграций.
- [ ] Настройка gunicorn + nginx + systemd‑сервиса для Django‑проекта.
- [ ] Настройка HTTPS (Let’s Encrypt).

